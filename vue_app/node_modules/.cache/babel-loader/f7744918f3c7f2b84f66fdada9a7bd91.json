{"remainingRequest":"E:\\myProject\\vue_app\\node_modules\\babel-loader\\lib\\index.js!E:\\myProject\\vue_app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myProject\\vue_app\\src\\components\\tabbar\\LoginContainer.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\myProject\\vue_app\\src\\components\\tabbar\\LoginContainer.vue","mtime":1548231851888},{"path":"E:\\myProject\\vue_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1535162686000},{"path":"E:\\myProject\\vue_app\\node_modules\\babel-loader\\lib\\index.js","mtime":1534881726000},{"path":"E:\\myProject\\vue_app\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      uname: \"\",\n      upwd: \"\",\n      path: \"\",\n      //保存上一页面的path\n      timer: \"\" //保存定时器\n\n    };\n  },\n  created: function created() {\n    //接收上一个页面的路径\n    this.path = this.$route.query.path;\n  },\n  destroyed: function destroyed() {\n    //关闭页面时，停止定时器\n    clearTimeout(this.timer);\n  },\n  methods: {\n    //登录\n    login: function login() {\n      var _this = this;\n\n      var state = this.$store.getters.isLogin; //获取vuex中的登录状态\n\n      if (!state) {\n        if (this.uname == \"\") {\n          Toast(\"请输入用户名\");\n          return;\n        } else if (this.upwd == \"\") {\n          Toast(\"请输入密码\");\n          return;\n        }\n\n        this.$http.post(\"Login\", {\n          uname: this.uname,\n          upwd: this.upwd\n        }).then(function (res) {\n          if (res.body[1].code === 1) {\n            //返回的code==1,说明登陆成功\n            if (_this.path) {\n              //判断是否有上一页的path\n              Toast({\n                message: res.body[1].msg + \",即将返回来时页面\",\n                duration: 2000\n              });\n            } else {\n              Toast({\n                message: res.body[1].msg + \"即将打开主页\",\n                duration: 2000\n              });\n            }\n\n            _this.$store.commit('loginState', res.body[0].uid); //登录成功，修改登录状态,uid\n\n\n            if (_this.path) {\n              //判断是否有上一页的path\n              setTimeout(function () {\n                //this.$router.go(-1) //返回来时页面\n                _this.$router.push(_this.path);\n              }, 2000);\n            } else {\n              _this.timer = setTimeout(function () {\n                this.$router.push('/home');\n              }, 2000);\n            }\n          } else {\n            Toast(res.body.msg);\n          }\n        });\n      } else {\n        return;\n      }\n    },\n\n    /*跳转到注册页面*/\n    register: function register() {\n      this.$router.push(\"/home/register\");\n    }\n  }\n};",{"version":3,"sources":["LoginContainer.vue"],"names":[],"mappings":";;;;;;;;;AAUA,SAAA,KAAA,QAAA,SAAA;AAEA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,aAAA,EADA;AAEA,YAAA,EAFA;AAGA,YAAA,EAHA;AAGA;AACA,aAAA,EAJA,CAIA;;AAJA,KAAA;AAMA,GARA;AASA,SATA,qBASA;AACA;AACA,SAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA;AACA,GAZA;AAaA,WAbA,uBAaA;AAAA;AACA,iBAAA,KAAA,KAAA;AACA,GAfA;AAgBA,WAAA;AACA;AACA,SAFA,mBAEA;AAAA;;AACA,UAAA,QAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAAA,CADA,CACA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,YAAA,KAAA,KAAA,IAAA,EAAA,EAAA;AACA,gBAAA,QAAA;AACA;AACA,SAHA,MAGA,IAAA,KAAA,IAAA,IAAA,EAAA,EAAA;AACA,gBAAA,OAAA;AACA;AACA;;AACA,aAAA,KAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,iBAAA,KAAA,KADA;AAEA,gBAAA,KAAA;AAFA,SAAA,EAIA,IAJA,CAIA,eAAA;AACA,cAAA,IAAA,IAAA,CAAA,CAAA,EAAA,IAAA,KAAA,CAAA,EAAA;AAAA;AACA,gBAAA,MAAA,IAAA,EAAA;AAAA;AACA,oBAAA;AACA,yBAAA,IAAA,IAAA,CAAA,CAAA,EAAA,GAAA,GAAA,WADA;AAEA,0BAAA;AAFA,eAAA;AAIA,aALA,MAKA;AACA,oBAAA;AACA,yBAAA,IAAA,IAAA,CAAA,CAAA,EAAA,GAAA,GAAA,QADA;AAEA,0BAAA;AAFA,eAAA;AAIA;;AACA,kBAAA,MAAA,CAAA,MAAA,CAAA,YAAA,EAAA,IAAA,IAAA,CAAA,CAAA,EAAA,GAAA,EAZA,CAYA;;;AACA,gBAAA,MAAA,IAAA,EAAA;AAAA;AACA,yBAAA,YAAA;AACA;AACA,sBAAA,OAAA,CAAA,IAAA,CAAA,MAAA,IAAA;AACA,eAHA,EAGA,IAHA;AAIA,aALA,MAKA;AACA,oBAAA,KAAA,GAAA,WAAA,YAAA;AACA,qBAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,eAFA,EAEA,IAFA,CAAA;AAGA;AACA,WAvBA,MAuBA;AACA,kBAAA,IAAA,IAAA,CAAA,GAAA;AACA;AACA,SA/BA;AAgCA,OAxCA,MAwCA;AACA;AACA;AACA,KA/CA;;AAgDA;AACA,YAjDA,sBAiDA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,gBAAA;AACA;AAnDA;AAhBA,CAAA","sourcesContent":["<template>\r\n    <div class=\"app-login\">\r\n        用户名：<input type=\"text\" placeholder=\"请输入用户名\" name=\"uname\" v-model=\"uname\"/>\r\n        密码：<input type=\"password\" placeholder=\"请输入密码\" name=\"upwd\" v-model=\"upwd\"/>\r\n        <mt-button type=\"primary\" size=\"normal\" @click=\"login()\">登录</mt-button>\r\n        <mt-button type=\"primary\" size=\"normal\" @click=\"register()\">注册</mt-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {Toast} from \"mint-ui\"\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                uname: \"\",\r\n                upwd: \"\",\r\n                path: \"\",//保存上一页面的path\r\n                timer:\"\",//保存定时器\r\n            }\r\n        },\r\n        created() {\r\n            //接收上一个页面的路径\r\n            this.path = this.$route.query.path\r\n        },\r\n        destroyed(){ //关闭页面时，停止定时器\r\n            clearTimeout(this.timer)\r\n        },\r\n        methods: {\r\n            //登录\r\n            login() {\r\n                var state = this.$store.getters.isLogin //获取vuex中的登录状态\r\n                if (!state) {\r\n                    if (this.uname == \"\") {\r\n                        Toast(\"请输入用户名\")\r\n                        return\r\n                    } else if (this.upwd == \"\") {\r\n                        Toast(\"请输入密码\")\r\n                        return\r\n                    }\r\n                    this.$http.post(\"Login\", {\r\n                        uname: this.uname,\r\n                        upwd: this.upwd\r\n                    })\r\n                        .then(res => {\r\n                            if (res.body[1].code === 1) { //返回的code==1,说明登陆成功\r\n                                if (this.path){  //判断是否有上一页的path\r\n                                    Toast({\r\n                                        message: res.body[1].msg + \",即将返回来时页面\",\r\n                                        duration: 2000\r\n                                    })\r\n                                }else{\r\n                                    Toast({\r\n                                        message: res.body[1].msg+\"即将打开主页\",\r\n                                        duration: 2000\r\n                                    })\r\n                                }\r\n                                this.$store.commit('loginState', res.body[0].uid) //登录成功，修改登录状态,uid\r\n                                if (this.path) {//判断是否有上一页的path\r\n                                    setTimeout(() => {\r\n                                        //this.$router.go(-1) //返回来时页面\r\n                                        this.$router.push(this.path)\r\n                                    }, 2000)\r\n                                }else{\r\n                                    this.timer=setTimeout(function () {\r\n                                        this.$router.push('/home')\r\n                                    },2000)\r\n                                }\r\n                            } else {\r\n                                Toast(res.body.msg)\r\n                            }\r\n                        })\r\n                } else {\r\n                    return\r\n                }\r\n            },\r\n            /*跳转到注册页面*/\r\n            register() {\r\n                this.$router.push(\"/home/register\")\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .app-login {\r\n        padding: 15px;\r\n    }\r\n\r\n    div.app-login > :nth-child(3) {\r\n        margin-left: 91px;\r\n    }\r\n\r\n    div.app-login > :last-child {\r\n        margin-left: 5px;\r\n    }\r\n</style>"],"sourceRoot":"src\\components\\tabbar"}]}